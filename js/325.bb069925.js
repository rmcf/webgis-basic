"use strict";(self["webpackChunkdggs_webgis"]=self["webpackChunkdggs_webgis"]||[]).push([[325],{6325:(e,t,r)=>{r.r(t),r.d(t,{default:()=>_});var o=r(3673);function n(e,t,r,n,s,a){const l=(0,o.up)("Map"),i=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(i,{class:"q-pt-lg"},{default:(0,o.w5)((()=>[(0,o._)("div",null,[(0,o.Wm)(l)])])),_:1})}var s=r(2323);const a={class:"q-pa-md row items-start items-center q-gutter-md"},l={id:"openmap",ref:"map-gis",class:"map-container"};function i(e,t,r,n,i,c){return(0,o.wg)(),(0,o.iD)("div",a,[(0,o._)("div",null,"Map zoom: "+(0,s.zw)(i.mapZoom),1),(0,o._)("div",null," Map center: "+(0,s.zw)(c.mapCenterComputed[0].toFixed(5))+", "+(0,s.zw)(c.mapCenterComputed[1].toFixed(5)),1),(0,o._)("div",l,null,512)])}r(2167);var c=r(3081),p=r(5140),m=r(7879),u=r(2411),d=r(4070),h=r(7263),w=r(5344),Z=r(2553),g=r(3489),f=r(5090),C=r(9455),y=r(1314);const S={name:"Map",props:{layer:Object},components:{},data(){return{map:null,mapCenter:[25.073697,58.706599],mapZoom:7}},watch:{layerSelectedRasterComputed(e,t){this.updateMap()},layersSelectedVectorComputed(e,t){this.updateMap()}},mounted(){this.createMap()},methods:{testFunction(){console.log("test")},createMap(){var e=[];const t=new m.Z({source:new u.Z({url:this.layerSelectedRasterComputed.url,attributions:this.layerSelectedRasterComputed.attributions})});e.push(t);const r=new g.ZP({fill:new f.Z({color:"rgba(255, 255, 255, 0.6)"}),stroke:new C.Z({color:"#319FD3",width:1}),text:new y.Z({font:"12px Calibri,sans-serif",fill:new f.Z({color:"#000"}),stroke:new C.Z({color:"#fff",width:3})})});this.layersSelectedVectorComputed.length>0&&this.layersSelectedVectorComputed.forEach((t=>{let o=new h.Z({source:new w.Z({url:t.url,format:new Z.Z}),style:function(e){return r.getText().setText(e.get("name")),r}});e.push(o)})),this.map=new c.Z({target:this.$refs["map-gis"],layers:e,view:new p.ZP({center:(0,d.mi)(this.mapCenter),zoom:this.mapZoom,constrainResolution:!0})}),this.map.on("moveend",(e=>{let t=e.map,r=t.getView().getCenter(),o=t.getView().getZoom();this.mapCenter=r,this.mapZoom=o}))},updateMap(){document.getElementById("openmap").innerHTML="";var e=[];const t=new m.Z({source:new u.Z({url:this.layerSelectedRasterComputed.url,attributions:this.layerSelectedRasterComputed.attributions})});e.push(t);const r=new g.ZP({fill:new f.Z({color:"rgba(255, 255, 255, 0.6)"}),stroke:new C.Z({color:"#319FD3",width:1}),text:new y.Z({font:"12px Calibri,sans-serif",fill:new f.Z({color:"#000"}),stroke:new C.Z({color:"#fff",width:3})})});this.layersSelectedVectorComputed.length>0&&this.layersSelectedVectorComputed.forEach((t=>{let o=new h.Z({source:new w.Z({url:t.url,format:new Z.Z}),style:function(e){return r.getText().setText(e.get("name")),r}});e.push(o)})),this.map=new c.Z({target:this.$refs["map-gis"],layers:e,view:new p.ZP({center:this.mapCenter,zoom:this.mapZoom,constrainResolution:!0})}),this.map.on("moveend",(e=>{let t=e.map,r=t.getView().getCenter(),o=t.getView().getZoom();this.mapCenter=r,this.mapZoom=o}))}},computed:{layersSelectedVectorComputed:function(){return this.$store.state.layers.layersSelectedVector},layerSelectedRasterComputed:function(){return this.$store.state.layers.layerSelectedRaster},mapCenterComputed:function(){return(0,d.bU)(this.mapCenter)}}};var v=r(269),b=r(7518),V=r.n(b);S.render=i,S.__scopeId="data-v-2b17d0d5";const M=S;V()(S,"components",{QBtn:v.Z});const R={name:"Web-GIS",components:{Map:M},data(){return{}},mounted(){},methods:{},computed:{layersSelectedVectorComputed:function(){return this.$store.state.layers.layersSelectedVector},layerSelectedRasterComputed:function(){return this.$store.state.layers.layerSelectedRaster}}};var x=r(4379);R.render=n;const _=R;V()(R,"components",{QPage:x.Z})}}]);